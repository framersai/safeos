(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{64829:function(e,s,t){Promise.resolve().then(t.bind(t,58701))},58701:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(57437),l=t(2265),n=t(27648),r=t(96769),i=t(27454),o=t(59625);let c={totalQueued:0,averageWaitSeconds:15,currentLoad:"low",estimatedClearTime:0,serverStatus:"online"};(0,o.Ue)((e,s)=>({requests:[],stats:{...c},isConnected:!0,lastUpdate:Date.now(),addRequest:function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",l="req-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,9)),n=s().stats,r=s().requests.filter(e=>"queued"===e.status||"processing"===e.status).length+1,i=function(e){switch(e){case"ai_analysis":default:return 10;case"complex_detection":return 5;case"audio_analysis":return 8;case"behavior_prediction":return 15}}(t),o={id:l,type:t,estimatedTimeSeconds:Math.round(i*function(e){switch(e){case"low":default:return 1;case"medium":return 1.5;case"high":return 2.5;case"critical":return 5}}(n.currentLoad)*r),position:r,status:"queued",resourceCommitted:!1,createdAt:Date.now(),priority:a};return e(e=>({requests:[...e.requests,o],stats:{...e.stats,totalQueued:e.stats.totalQueued+1}})),l},cancelRequest:s=>{e(e=>({requests:e.requests.map(e=>e.id===s?{...e,status:"cancelled"}:e)}))},updateRequest:(s,t)=>{e(e=>({requests:e.requests.map(e=>e.id===s?{...e,...t}:e),lastUpdate:Date.now()}))},clearCompleted:()=>{e(e=>({requests:e.requests.filter(e=>"completed"!==e.status&&"cancelled"!==e.status&&"failed"!==e.status)}))},simulateProgress:e=>{let t=s().requests.find(s=>s.id===e);t&&"queued"===t.status&&(s().updateRequest(e,{status:"processing",startedAt:Date.now()}),setTimeout(()=>{s().updateRequest(e,{status:"completed",completedAt:Date.now()})},1e3*t.estimatedTimeSeconds))},setStats:s=>{e(e=>({stats:{...e.stats,...s},lastUpdate:Date.now()}))},setConnected:s=>{e({isConnected:s})}}));var d=t(66471);function x(e){let{mode:s,size:t="md",showDescription:l=!1}=e,n={local:{label:"LOCAL INSTANT",description:"100% on-device. No internet required. Zero latency.",bgClass:"bg-emerald-500/20",textClass:"text-emerald-400",borderClass:"border-emerald-500/30",dotClass:"bg-emerald-400"},ai_enhanced:{label:"AI QUEUE",description:"Advanced AI analysis. May be queued based on server load.",bgClass:"bg-amber-500/20",textClass:"text-amber-400",borderClass:"border-amber-500/30",dotClass:"bg-amber-400"},hybrid:{label:"HYBRID",description:"Instant local detection + AI enhancement in background.",bgClass:"bg-blue-500/20",textClass:"text-blue-400",borderClass:"border-blue-500/30",dotClass:"bg-blue-400"}}[s];return(0,a.jsxs)("div",{className:"inline-flex flex-col gap-1",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 ".concat("sm"===t?"text-[10px] px-1.5 py-0.5":"text-xs px-2 py-1"," ").concat(n.bgClass," ").concat(n.textClass," border ").concat(n.borderClass," rounded font-mono font-medium uppercase tracking-wider"),children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full ".concat(n.dotClass," animate-pulse")}),n.label]}),l&&(0,a.jsx)("span",{className:"text-xs text-slate-500",children:n.description})]})}function m(){return(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-slate-800/30 rounded-xl border border-slate-700/30",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Processing Modes"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x,{mode:"local",size:"sm"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-slate-300",children:"100% on-device processing"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"No internet required. Zero latency. Pixel detection, motion, basic audio."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x,{mode:"ai_enhanced",size:"sm"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-slate-300",children:"Cloud AI analysis"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Advanced pattern recognition, behavior prediction. May be queued."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x,{mode:"hybrid",size:"sm"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-slate-300",children:"Best of both"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Instant local alerts + AI enhancement in background."})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 p-2 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-400",children:[(0,a.jsx)(d.Dp,{size:14}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"AI Features Coming Soon"})]}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-400",children:"AI-enhanced processing is in development. All current features use instant local processing."})]})]})}var u=t(66454),p=t(26435);function h(){let{user:e,isLoggedIn:s,updateProfile:t}=(0,r.t)(),[o,c]=(0,l.useState)("presets"),[h,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null),[C,S]=(0,l.useState)(!1),{activePresetId:k,globalSettings:D,scenarioOverrides:E,detectionZones:z,audioSettings:I,timingSettings:A,globalMute:_,customPresets:P,setActivePreset:B,updateGlobalSettings:q,setScenarioOverride:T,updateDetectionZone:M,updateAudioSettings:L,updateTimingSettings:O,toggleGlobalMute:R,saveCustomPreset:V,exportSettings:F,importSettings:U,resetToDefaults:H}=(0,i.F2)(),K=(0,u.Z)(),W=(0,p.zn)(),[Q,J]=(0,l.useState)((null==e?void 0:e.displayName)||""),[Y,Z]=(0,l.useState)("dark"),[G,X]=(0,l.useState)(!0),[$,ee]=(0,l.useState)(!1),[es,et]=(0,l.useState)(!1),[ea,el]=(0,l.useState)(!1),[en,er]=(0,l.useState)("22:00"),[ei,eo]=(0,l.useState)("07:00"),[ec,ed]=(0,l.useState)(!1),[ex,em]=(0,l.useState)(""),[eu,ep]=(0,l.useState)(""),[eh,eb]=(0,l.useState)("");if((0,l.useEffect)(()=>{if(S(!0),null==e?void 0:e.preferences){let s=e.preferences.theme;Z("system"===s?"auto":s||"dark")}},[e]),!C)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin"})});let eg=[{id:"presets",title:"Security Presets",icon:(0,a.jsx)(d.xq,{size:18})},{id:"sleep",title:"Sleep Monitoring",icon:(0,a.jsx)(d.C9,{size:18})},{id:"detection",title:"Detection",icon:(0,a.jsx)(d.Lj,{size:18})},{id:"audio",title:"Audio",icon:(0,a.jsx)(d.bl,{size:18})},{id:"timing",title:"Timing",icon:(0,a.jsx)(d.tr,{size:18})},{id:"sounds",title:"Sound Testing",icon:(0,a.jsx)(d.ue,{size:18})},{id:"notifications",title:"Notifications",icon:(0,a.jsx)(d.YK,{size:18})},{id:"scenarios",title:"Scenarios",icon:(0,a.jsx)(d.Dp,{size:18})},{id:"data",title:"Data & Privacy",icon:(0,a.jsx)(d.iC,{size:18})}],ej=async()=>{v(!0),w(null);try{let e=localStorage.getItem("safeos_session_token"),s=await fetch("/api/auth/profile",{method:"PATCH",headers:{"Content-Type":"application/json","X-Session-Token":e||""},body:JSON.stringify({displayName:Q,preferences:{motionSensitivity:D.motionSensitivity/100,audioSensitivity:D.audioSensitivity/100,alertVolume:D.alertVolume/100,theme:Y},notificationSettings:{browserPush:G,sms:$,telegram:es,quietHoursStart:ea?en:null,quietHoursEnd:ea?ei:null}})}).catch(()=>null);if(null==s?void 0:s.ok){let e=await s.json();e.success&&t(e.data)}w({type:"success",text:"Settings saved successfully!"})}catch(e){w({type:"error",text:"Network error. Settings saved locally."})}finally{v(!1),setTimeout(()=>w(null),3e3)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[(0,a.jsx)("header",{className:"p-4 sm:p-6 border-b border-slate-700/50",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.default,{href:"/",className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)(d.ed,{size:20})}),(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"Settings"})]}),(0,a.jsx)("button",{onClick:ej,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg transition-colors disabled:opacity-50",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.NO,{size:16}),"Save Changes"]})})]})}),y&&(0,a.jsx)("div",{className:"fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50 ".concat("success"===y.type?"bg-emerald-500":"bg-red-500"," text-white"),children:y.text}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("nav",{className:"md:w-56 flex-shrink-0",children:(0,a.jsx)("ul",{className:"space-y-1",children:eg.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>c(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(o===e.id?"bg-slate-700 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[e.icon,(0,a.jsx)("span",{className:"text-sm",children:e.title})]})},e.id))})}),(0,a.jsxs)("div",{className:"flex-1 bg-slate-800/50 rounded-xl border border-slate-700/50 p-6 overflow-y-auto max-h-[calc(100vh-200px)]",children:["presets"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Security Presets"}),(0,a.jsx)("button",{onClick:()=>ed(!0),className:"px-3 py-1.5 bg-emerald-500/20 text-emerald-400 rounded-lg text-sm hover:bg-emerald-500/30 transition-colors",children:"Save Current as Preset"})]}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"Quick-apply security profiles for different situations."}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.values(i.pP).filter(e=>"custom"!==e.id).map(e=>(0,a.jsxs)("button",{onClick:()=>B(e.id),className:"p-4 rounded-xl border text-left transition-all ".concat(k===e.id?"bg-emerald-500/20 border-emerald-500/50 ring-2 ring-emerald-500/30":"bg-slate-700/30 border-slate-600/50 hover:bg-slate-700/50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:e.name}),k===e.id&&(0,a.jsx)(d.NO,{size:18,className:"text-emerald-500"})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,a.jsxs)("span",{className:"px-2 py-1 bg-slate-600/50 rounded",children:["Motion: ",e.motionSensitivity,"%"]}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-slate-600/50 rounded",children:["Volume: ",e.alertVolume,"%"]}),e.emergencyMode&&(0,a.jsx)("span",{className:"px-2 py-1 bg-red-500/30 text-red-400 rounded",children:"Emergency"})]})]},e.id))}),P.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-300 mb-3",children:"Your Custom Presets"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:P.map(e=>(0,a.jsxs)("button",{onClick:()=>i.F2.getState().loadCustomPreset(e.id),className:"p-3 rounded-lg bg-slate-700/30 border border-slate-600/50 hover:bg-slate-700/50 text-left",children:[(0,a.jsx)("span",{className:"font-medium text-white",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:e.description})]},e.id))})]})]}),"sleep"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Sleep Monitoring"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Ultra-sensitive detection presets for monitoring infants, pets, or anyone while sleeping. All sleep modes use 100% local processing for instant, zero-latency alerts."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsx)(N,{presetId:"infant_sleep",preset:i.Km.infant_sleep,isActive:"infant_sleep"===k,onActivate:()=>B("infant_sleep")}),(0,a.jsx)(N,{presetId:"pet_sleep",preset:i.Km.pet_sleep,isActive:"pet_sleep"===k,onActivate:()=>B("pet_sleep")}),(0,a.jsx)(N,{presetId:"deep_sleep_minimal",preset:i.Km.deep_sleep_minimal,isActive:"deep_sleep_minimal"===k,onActivate:()=>B("deep_sleep_minimal")})]}),(0,a.jsx)(m,{}),(0,a.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700/50",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-white mb-3",children:"How Sleep Detection Works"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-slate-400",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(d.NO,{size:16,className:"text-emerald-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{className:"text-white",children:"Absolute Pixel Threshold:"})," Detects exact number of changed pixels (e.g., 5 pixels = alert)"]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(d.NO,{size:16,className:"text-emerald-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{className:"text-white",children:"100% Local Processing:"})," No internet required. Zero latency. Instant alerts."]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(d.NO,{size:16,className:"text-emerald-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{className:"text-white",children:"Early Exit Detection:"})," Triggers immediately when threshold is exceeded, no waiting."]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(d.NO,{size:16,className:"text-emerald-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{className:"text-white",children:"Optimized for Speed:"})," Downsampled processing for sub-5ms detection times."]})]})]})]})]}),"detection"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Advanced Detection"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-700/30 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Current Processing Mode:"}),(0,a.jsx)(x,{mode:D.processingMode,showDescription:!0})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Lj,{size:20,className:"text-emerald-500"}),(0,a.jsx)("span",{className:"font-medium text-white",children:"Motion Detection"}),(0,a.jsx)(x,{mode:"local",size:"sm"})]}),(0,a.jsx)(g,{enabled:D.motionDetectionEnabled,onChange:e=>q({motionDetectionEnabled:e})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(j,{label:"Sensitivity",value:D.motionSensitivity,onChange:e=>q({motionSensitivity:e}),description:"Higher = more sensitive to small movements"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Detection Zone"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:z.map(e=>(0,a.jsx)("button",{onClick:()=>M(e.id,{enabled:!e.enabled}),className:"p-2 rounded-lg text-sm transition-all ".concat(e.enabled?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-slate-600/30 text-slate-400 border border-transparent"),children:e.name},e.id))})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.xq,{size:20,className:"text-blue-500"}),(0,a.jsx)("span",{className:"font-medium text-white",children:"Pixel Detection"})]}),(0,a.jsx)(g,{enabled:D.pixelDetectionEnabled,onChange:e=>q({pixelDetectionEnabled:e})})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-4",children:"Compare frames pixel-by-pixel for precise change detection."}),(0,a.jsx)(j,{label:"Threshold",value:D.pixelThreshold,onChange:e=>q({pixelThreshold:e}),description:"Lower = more sensitive to subtle changes",inverted:!0})]})]}),"audio"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Audio Detection"}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.bl,{size:20,className:"text-purple-500"}),(0,a.jsx)("span",{className:"font-medium text-white",children:"Audio Detection"})]}),(0,a.jsx)(g,{enabled:D.audioDetectionEnabled,onChange:e=>q({audioDetectionEnabled:e})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(j,{label:"Sensitivity",value:D.audioSensitivity,onChange:e=>q({audioSensitivity:e}),description:"Adjust for ambient noise levels"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Frequency Range"}),(0,a.jsxs)("select",{value:I.frequencyRange,onChange:e=>L({frequencyRange:e.target.value}),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white",children:[(0,a.jsx)("option",{value:"all",children:"All Frequencies"}),(0,a.jsx)("option",{value:"baby_cry",children:"Baby Cry (300-3000 Hz)"}),(0,a.jsx)("option",{value:"pet_sounds",children:"Pet Sounds (250-4000 Hz)"}),(0,a.jsx)("option",{value:"elderly_fall",children:"Elderly Fall/Call (100-1000 Hz)"}),(0,a.jsx)("option",{value:"custom",children:"Custom Range"})]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:I.backgroundNoiseFilter,onChange:e=>L({backgroundNoiseFilter:e.target.checked}),className:"w-5 h-5 rounded border-slate-600 bg-slate-800 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white",children:"Background Noise Filter"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Reduces false positives from ambient noise"})]})]})]})]})]}),"timing"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Timing Controls"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Analysis Interval: ",D.analysisInterval,"s"]}),(0,a.jsx)("input",{type:"range",min:"1",max:"60",value:D.analysisInterval,onChange:e=>q({analysisInterval:parseInt(e.target.value)}),className:"w-full slider"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"How often to analyze frames. Lower = more responsive, higher CPU usage."})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Alert Delay: ",D.alertDelay,"s"]}),(0,a.jsx)("input",{type:"range",min:"0",max:"300",step:"10",value:D.alertDelay,onChange:e=>q({alertDelay:parseInt(e.target.value)}),className:"w-full slider"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Wait time before escalating alert severity. 0 = immediate escalation."})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Cooldown Period: ",A.cooldownPeriod,"s"]}),(0,a.jsx)("input",{type:"range",min:"10",max:"300",step:"10",value:A.cooldownPeriod,onChange:e=>O({cooldownPeriod:parseInt(e.target.value)}),className:"w-full slider"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Minimum time between consecutive alerts to prevent spam."})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Emergency Escalation: ",0===A.emergencyEscalationDelay?"Disabled":"".concat(A.emergencyEscalationDelay,"s")]}),(0,a.jsx)("input",{type:"range",min:"0",max:"600",step:"30",value:A.emergencyEscalationDelay,onChange:e=>O({emergencyEscalationDelay:parseInt(e.target.value)}),className:"w-full slider"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Auto-trigger emergency mode after unacknowledged alerts. 0 = manual only."})]})]})]}),"sounds"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Sound Testing"}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-slate-300",children:["Alert Volume: ",D.alertVolume,"%"]}),(0,a.jsx)("button",{onClick:R,className:"p-2 rounded-lg transition-colors ".concat(_?"bg-red-500/20 text-red-400":"bg-slate-600/50 text-slate-400 hover:text-white"),children:_?(0,a.jsx)(d.dr,{size:20}):(0,a.jsx)(d.ue,{size:20})})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:D.alertVolume,onChange:e=>q({alertVolume:parseInt(e.target.value)}),className:"w-full slider"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:["notification","alert","warning","alarm","emergency"].map(e=>(0,a.jsxs)("button",{onClick:()=>K.test(e),className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30 hover:bg-slate-700/50 transition-all group",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(d.JF,{size:18,className:"text-emerald-500 group-hover:scale-110 transition-transform"}),(0,a.jsx)("span",{className:"text-white capitalize",children:e})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1 text-center",children:"emergency"===e?"Max volume":"".concat(b[e],"% volume")})]},e))}),(0,a.jsxs)("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(d.Dp,{size:20,className:"text-red-500"}),(0,a.jsx)("span",{className:"font-medium text-red-400",children:"Emergency Mode Test"})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Tests the emergency alarm for 2 seconds. Sound will play at max volume."}),(0,a.jsx)("button",{onClick:()=>K.testEmergency(),className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:"Test Emergency Alarm"})]})]}),"notifications"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Notification Settings"}),!W.isGranted&&(0,a.jsxs)("div",{className:"p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(d.YK,{size:20,className:"text-blue-500"}),(0,a.jsx)("span",{className:"font-medium text-blue-400",children:"Browser Notifications"})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Enable browser notifications to receive alerts even when the tab is in the background."}),(0,a.jsx)("button",{onClick:W.requestPermission,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Enable Notifications"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-4 bg-slate-700/30 rounded-xl",children:[(0,a.jsx)("input",{type:"checkbox",checked:G,onChange:e=>X(e.target.checked),className:"w-5 h-5 rounded border-slate-600 bg-slate-800 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white",children:"Browser Push Notifications"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Get alerts even when the tab is in background"})]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-4 bg-slate-700/30 rounded-xl",children:[(0,a.jsx)("input",{type:"checkbox",checked:$,onChange:e=>ee(e.target.checked),className:"w-5 h-5 rounded border-slate-600 bg-slate-800 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white",children:"SMS Notifications"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Receive critical alerts via text message (coming soon)"})]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-4 bg-slate-700/30 rounded-xl",children:[(0,a.jsx)("input",{type:"checkbox",checked:es,onChange:e=>et(e.target.checked),className:"w-5 h-5 rounded border-slate-600 bg-slate-800 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white",children:"Telegram Notifications"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Get alerts via Telegram bot (coming soon)"})]})]})]}),(0,a.jsx)("hr",{className:"border-slate-700"}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer mb-4",children:[(0,a.jsx)("input",{type:"checkbox",checked:ea,onChange:e=>el(e.target.checked),className:"w-5 h-5 rounded border-slate-600 bg-slate-800 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white",children:"Quiet Hours"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Mute non-critical alerts during set times"})]})]}),ea&&(0,a.jsxs)("div",{className:"flex items-center gap-4 ml-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400 mb-1",children:"Start"}),(0,a.jsx)("input",{type:"time",value:en,onChange:e=>er(e.target.value),className:"px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white"})]}),(0,a.jsx)("span",{className:"text-slate-500 mt-5",children:"to"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400 mb-1",children:"End"}),(0,a.jsx)("input",{type:"time",value:ei,onChange:e=>eo(e.target.value),className:"px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white"})]})]})]})]}),"scenarios"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Per-Scenario Configuration"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Customize detection settings for specific monitoring scenarios."}),["pet","baby","elderly"].map(e=>(0,a.jsx)(f,{scenario:e,overrides:E[e],globalSettings:D,onUpdate:s=>T(e,s)},e))]}),"data"===o&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Data & Privacy"}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsx)("h3",{className:"text-white font-medium mb-2",children:"Your Privacy Matters"}),(0,a.jsxs)("ul",{className:"text-sm text-slate-400 space-y-2",children:[(0,a.jsx)("li",{children:"• All video processing happens locally in your browser"}),(0,a.jsx)("li",{children:"• Frames are only kept for 5-10 minutes (rolling buffer)"}),(0,a.jsx)("li",{children:"• No video data is stored on servers unless flagged"}),(0,a.jsx)("li",{children:"• Settings are stored locally in your browser"})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsx)("h3",{className:"text-white font-medium mb-2",children:"Export Settings"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Download your settings as a JSON file for backup or transfer."}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([F()],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="safeos-settings-".concat(new Date().toISOString().split("T")[0],".json"),t.click(),URL.revokeObjectURL(s)},className:"flex items-center gap-2 px-4 py-2 bg-emerald-500/20 text-emerald-400 rounded-lg hover:bg-emerald-500/30 transition-colors",children:[(0,a.jsx)(d.Dj,{size:18}),"Export Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsx)("h3",{className:"text-white font-medium mb-2",children:"Import Settings"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"Paste your exported settings JSON to restore configuration."}),(0,a.jsx)("textarea",{value:eh,onChange:e=>eb(e.target.value),placeholder:"Paste settings JSON here...",className:"w-full h-24 px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-slate-500 text-sm font-mono"}),(0,a.jsxs)("button",{onClick:()=>{eh.trim()&&(U(eh)?(w({type:"success",text:"Settings imported successfully!"}),eb("")):w({type:"error",text:"Invalid settings format"}))},disabled:!eh.trim(),className:"mt-2 flex items-center gap-2 px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors disabled:opacity-50",children:[(0,a.jsx)(d.bC,{size:18}),"Import Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-red-400 font-medium mb-2",children:"Reset to Defaults"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-3",children:"This will reset all settings to their default values. This cannot be undone."}),(0,a.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to reset all settings to defaults?")&&(H(),w({type:"success",text:"Settings reset to defaults"}))},className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:[(0,a.jsx)(d.tr,{size:18}),"Reset All Settings"]})]})]})]})]})}),ec&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full mx-4 border border-slate-700",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Save Custom Preset"}),(0,a.jsx)("input",{type:"text",value:ex,onChange:e=>em(e.target.value),placeholder:"Preset name...",className:"w-full px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white mb-3"}),(0,a.jsx)("textarea",{value:eu,onChange:e=>ep(e.target.value),placeholder:"Description (optional)...",className:"w-full h-20 px-4 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white mb-4"}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)("button",{onClick:()=>ed(!1),className:"px-4 py-2 text-slate-400 hover:text-white transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{ex.trim()&&(V(ex,eu),ed(!1),em(""),ep(""),w({type:"success",text:"Custom preset saved!"}))},disabled:!ex.trim(),className:"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors disabled:opacity-50",children:"Save Preset"})]})]})})]})}let b={notification:60,alert:70,warning:80,alarm:90,emergency:100};function g(e){let{enabled:s,onChange:t}=e;return(0,a.jsx)("button",{onClick:()=>t(!s),className:"relative w-12 h-6 rounded-full transition-colors ".concat(s?"bg-emerald-500":"bg-slate-600"),children:(0,a.jsx)("div",{className:"absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ".concat(s?"translate-x-7":"translate-x-1")})})}function j(e){let{label:s,value:t,onChange:l,description:n,inverted:r}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm text-slate-300",children:s}),(0,a.jsxs)("span",{className:"text-sm text-emerald-500 font-mono",children:[t,"%"]})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:t,onChange:e=>l(parseInt(e.target.value)),className:"w-full slider"}),n&&(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:n})]})}function N(e){let{presetId:s,preset:t,isActive:l,onActivate:n}=e,r={infant_sleep:(0,a.jsx)(d.C7,{size:24,className:"text-pink-400"}),pet_sleep:(0,a.jsx)(d.jE,{size:24,className:"text-amber-400"}),deep_sleep_minimal:(0,a.jsx)(d.BX,{size:24,className:"text-red-400"})},i={infant_sleep:{bg:"bg-pink-500/5",border:"border-pink-500/20",activeBg:"bg-pink-500/20",activeBorder:"border-pink-500/50"},pet_sleep:{bg:"bg-amber-500/5",border:"border-amber-500/20",activeBg:"bg-amber-500/20",activeBorder:"border-amber-500/50"},deep_sleep_minimal:{bg:"bg-red-500/5",border:"border-red-500/20",activeBg:"bg-red-500/20",activeBorder:"border-red-500/50"}}[s];return(0,a.jsx)("button",{onClick:n,className:"p-4 rounded-xl text-left transition-all ".concat(l?"".concat(i.activeBg," border-2 ").concat(i.activeBorder):"".concat(i.bg," border ").concat(i.border," hover:bg-opacity-30")),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-2 rounded-lg bg-slate-800/50",children:r[s]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-white",children:t.name}),(0,a.jsx)(x,{mode:t.processingMode,size:"sm"})]}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:t.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 mt-3 text-xs",children:[(0,a.jsxs)("span",{className:"px-2 py-1 rounded bg-slate-700/50 text-slate-300",children:[(0,a.jsx)("span",{className:"text-emerald-400 font-bold",children:t.absolutePixelThreshold})," pixel threshold"]}),(0,a.jsxs)("span",{className:"px-2 py-1 rounded bg-slate-700/50 text-slate-300",children:[(0,a.jsxs)("span",{className:"text-blue-400 font-bold",children:[t.analysisInterval,"s"]})," interval"]}),(0,a.jsxs)("span",{className:"px-2 py-1 rounded bg-slate-700/50 text-slate-300",children:[(0,a.jsxs)("span",{className:"text-yellow-400 font-bold",children:[t.motionSensitivity,"%"]})," sensitivity"]}),t.emergencyMode&&(0,a.jsx)("span",{className:"px-2 py-1 rounded bg-red-500/20 text-red-400 font-medium",children:"Emergency Mode ON"})]})]}),l&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(d.NO,{size:20,className:"text-emerald-400"})})]})})}function f(e){var s,t,n;let{scenario:r,overrides:i,globalSettings:o,onUpdate:c}=e,[x,m]=(0,l.useState)(!1),u={pet:{name:"Pet Monitoring",icon:(0,a.jsx)(d.jE,{size:18})},baby:{name:"Baby Monitoring",icon:(0,a.jsx)(d.C7,{size:18})},elderly:{name:"Elderly Care",icon:(0,a.jsx)(d.Dp,{size:18})}},p=i&&Object.keys(i).length>0;return(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-xl border border-slate-600/30",children:[(0,a.jsxs)("button",{onClick:()=>m(!x),className:"w-full flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:u[r].icon}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"font-medium text-white",children:u[r].name}),p&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-emerald-500/20 text-emerald-400 text-xs rounded",children:"Customized"})]})]}),(0,a.jsx)("span",{className:"text-slate-400",children:x?"▲":"▼"})]}),x&&(0,a.jsxs)("div",{className:"mt-4 space-y-4 pt-4 border-t border-slate-600/30",children:[(0,a.jsx)(j,{label:"Motion Sensitivity",value:null!==(s=null==i?void 0:i.motionSensitivity)&&void 0!==s?s:o.motionSensitivity,onChange:e=>c({...i,motionSensitivity:e})}),(0,a.jsx)(j,{label:"Audio Sensitivity",value:null!==(t=null==i?void 0:i.audioSensitivity)&&void 0!==t?t:o.audioSensitivity,onChange:e=>c({...i,audioSensitivity:e})}),(0,a.jsx)(j,{label:"Alert Volume",value:null!==(n=null==i?void 0:i.alertVolume)&&void 0!==n?n:o.alertVolume,onChange:e=>c({...i,alertVolume:e})}),p&&(0,a.jsx)("button",{onClick:()=>c(null),className:"text-sm text-slate-400 hover:text-white transition-colors",children:"Reset to global defaults"})]})]})}},21542:function(e,s,t){"use strict";let a,l,n;t.d(s,{X3:function(){return h}});let r=(e,s)=>s.some(s=>e instanceof s),i=new WeakMap,o=new WeakMap,c=new WeakMap,d=new WeakMap,x=new WeakMap,m={get(e,s,t){if(e instanceof IDBTransaction){if("done"===s)return o.get(e);if("objectStoreNames"===s)return e.objectStoreNames||c.get(e);if("store"===s)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return u(e[s])},set:(e,s,t)=>(e[s]=t,!0),has:(e,s)=>e instanceof IDBTransaction&&("done"===s||"store"===s)||s in e};function u(e){var s;if(e instanceof IDBRequest)return function(e){let s=new Promise((s,t)=>{let a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",n)},l=()=>{s(u(e.result)),a()},n=()=>{t(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",n)});return s.then(s=>{s instanceof IDBCursor&&i.set(s,e)}).catch(()=>{}),x.set(s,e),s}(e);if(d.has(e))return d.get(e);let t="function"==typeof(s=e)?s!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(s)?function(...e){return s.apply(p(this),e),u(i.get(this))}:function(...e){return u(s.apply(p(this),e))}:function(e,...t){let a=s.call(p(this),e,...t);return c.set(a,e.sort?e.sort():[e]),u(a)}:(s instanceof IDBTransaction&&function(e){if(o.has(e))return;let s=new Promise((s,t)=>{let a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",n),e.removeEventListener("abort",n)},l=()=>{s(),a()},n=()=>{t(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",n),e.addEventListener("abort",n)});o.set(e,s)}(s),r(s,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(s,m):s;return t!==e&&(d.set(e,t),x.set(t,e)),t}let p=e=>x.get(e);function h(e,s,{blocked:t,upgrade:a,blocking:l,terminated:n}={}){let r=indexedDB.open(e,s),i=u(r);return a&&r.addEventListener("upgradeneeded",e=>{a(u(r.result),e.oldVersion,e.newVersion,u(r.transaction),e)}),t&&r.addEventListener("blocked",e=>t(e.oldVersion,e.newVersion,e)),i.then(e=>{n&&e.addEventListener("close",()=>n()),l&&e.addEventListener("versionchange",e=>l(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i}let b=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],j=new Map;function N(e,s){if(!(e instanceof IDBDatabase&&!(s in e)&&"string"==typeof s))return;if(j.get(s))return j.get(s);let t=s.replace(/FromIndex$/,""),a=s!==t,l=g.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(l||b.includes(t)))return;let n=async function(e,...s){let n=this.transaction(e,l?"readwrite":"readonly"),r=n.store;return a&&(r=r.index(s.shift())),(await Promise.all([r[t](...s),l&&n.done]))[0]};return j.set(s,n),n}m={...n=m,get:(e,s,t)=>N(e,s)||n.get(e,s,t),has:(e,s)=>!!N(e,s)||n.has(e,s)}}},function(e){e.O(0,[648,883,471,769,365,971,117,744],function(){return e(e.s=64829)}),_N_E=e.O()}]);