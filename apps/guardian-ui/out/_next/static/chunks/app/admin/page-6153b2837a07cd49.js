(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{18467:function(e,s,t){Promise.resolve().then(t.bind(t,36683))},36683:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var a=t(57437),l=t(2265),r=t(27648);function i(){let[e,s]=(0,l.useState)("overview"),[t,i]=(0,l.useState)(null),[u,g]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[v,j]=(0,l.useState)(!0);(0,l.useEffect)(()=>{N();let e=setInterval(N,1e4);return()=>clearInterval(e)},[]);let N=async()=>{try{let[o,m]=await Promise.all([fetch("/api/status"),fetch("/api/review/flags?limit=20")]);if(o.ok){var e,s,t,a,l,r,n,d,c;let m=await o.json();i({uptime:m.uptime||0,totalStreams:(null===(e=m.stats)||void 0===e?void 0:e.totalStreams)||0,activeStreams:(null===(s=m.stats)||void 0===s?void 0:s.activeStreams)||0,totalAlerts:(null===(t=m.stats)||void 0===t?void 0:t.totalAlerts)||0,pendingReviews:(null===(a=m.stats)||void 0===a?void 0:a.pendingReviews)||0,analysisToday:(null===(l=m.stats)||void 0===l?void 0:l.analysisToday)||0,cloudFallbackRate:(null===(r=m.stats)||void 0===r?void 0:r.cloudFallbackRate)||0,avgResponseTime:(null===(n=m.stats)||void 0===n?void 0:n.avgResponseTime)||0,memoryUsage:(null===(d=m.stats)||void 0===d?void 0:d.memoryUsage)||0,cpuUsage:(null===(c=m.stats)||void 0===c?void 0:c.cpuUsage)||0})}if(m.ok){let e=await m.json();g(e.data||[])}b([{id:"1",type:"alert",message:"High concern alert triggered",timestamp:new Date().toISOString(),severity:"warning"},{id:"2",type:"stream",message:"New stream started",timestamp:new Date(Date.now()-6e4).toISOString(),severity:"info"},{id:"3",type:"review",message:"Content flag approved",timestamp:new Date(Date.now()-12e4).toISOString(),severity:"info"}])}catch(e){console.error("Failed to fetch admin data:",e)}finally{j(!1)}},f=async(e,s)=>{try{await fetch("/api/review/flags/".concat(e,"/action"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s})}),N()}catch(e){console.error("Failed to action flag:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[(0,a.jsx)("header",{className:"border-b border-slate-700/50 bg-slate-800/50 backdrop-blur-sm sticky top-0 z-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(r.default,{href:"/",className:"text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"System management & human review"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[t&&t.pendingReviews>0&&(0,a.jsx)("div",{className:"px-3 py-1.5 bg-orange-500/20 border border-orange-500/30 rounded-lg",children:(0,a.jsxs)("span",{className:"text-orange-400 text-sm font-medium",children:[t.pendingReviews," pending reviews"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-700/50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-slate-300",children:"System Healthy"})]})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("nav",{className:"w-48 flex-shrink-0",children:(0,a.jsx)("ul",{className:"space-y-1",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"reviews",label:"Reviews",icon:"\uD83D\uDC41️"},{id:"streams",label:"Streams",icon:"\uD83D\uDCF9"},{id:"users",label:"Users",icon:"\uD83D\uDC65"},{id:"system",label:"System",icon:"⚙️"},{id:"logs",label:"Logs",icon:"\uD83D\uDCDD"}].map(l=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>s(l.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(e===l.id?"bg-slate-700 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"),children:[(0,a.jsx)("span",{children:l.icon}),(0,a.jsx)("span",{children:l.label}),"reviews"===l.id&&t&&t.pendingReviews>0&&(0,a.jsx)("span",{className:"ml-auto bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full",children:t.pendingReviews})]})},l.id))})}),(0,a.jsx)("main",{className:"flex-1",children:v?(0,a.jsx)(h,{}):(0,a.jsxs)(a.Fragment,{children:["overview"===e&&(0,a.jsx)(n,{metrics:t,activities:p}),"reviews"===e&&(0,a.jsx)(d,{flags:u,onAction:f}),"streams"===e&&(0,a.jsx)(c,{}),"users"===e&&(0,a.jsx)(o,{}),"system"===e&&(0,a.jsx)(m,{metrics:t}),"logs"===e&&(0,a.jsx)(x,{})]})})]})})]})}function n(e){let{metrics:s,activities:t}=e;if(!s)return null;let l=[{label:"Active Streams",value:s.activeStreams,icon:"\uD83D\uDCF9",color:"from-blue-500 to-cyan-500"},{label:"Pending Reviews",value:s.pendingReviews,icon:"\uD83D\uDC41️",color:"from-orange-500 to-amber-500"},{label:"Analysis Today",value:s.analysisToday,icon:"\uD83D\uDD0D",color:"from-purple-500 to-pink-500"},{label:"Total Alerts",value:s.totalAlerts,icon:"\uD83D\uDD14",color:"from-red-500 to-orange-500"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(e=>(0,a.jsx)("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br ".concat(e.color," flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-2xl",children:e.icon})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-white",children:e.value}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:e.label})]})]})},e.label))}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"System Performance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(u,{label:"CPU Usage",value:s.cpuUsage,max:100,unit:"%"}),(0,a.jsx)(u,{label:"Memory",value:s.memoryUsage,max:100,unit:"%"}),(0,a.jsx)(u,{label:"Cloud Fallback",value:s.cloudFallbackRate,max:100,unit:"%",warning:s.cloudFallbackRate>20}),(0,a.jsx)(u,{label:"Avg Response",value:s.avgResponseTime,max:5e3,unit:"ms"})]})]}),(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"Recent Activity"}),(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-700/30 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mt-2 ".concat("error"===e.severity?"bg-red-500":"warning"===e.severity?"bg-yellow-500":"bg-emerald-500")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-white",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:g(e.timestamp)})]})]},e.id))})]})]}),(0,a.jsx)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"System Uptime"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-emerald-400 mt-2",children:function(e){let s=Math.floor(e/86400),t=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return s>0?"".concat(s,"d ").concat(t,"h ").concat(a,"m"):t>0?"".concat(t,"h ").concat(a,"m"):"".concat(a,"m")}(s.uptime)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Last restart"}),(0,a.jsx)("p",{className:"text-sm text-slate-300",children:new Date(Date.now()-1e3*s.uptime).toLocaleString()})]})]})})]})}function d(e){let{flags:s,onAction:t}=e,l=s.filter(e=>"pending"===e.status),r=s.filter(e=>"pending"!==e.status),i={1:{label:"Low",color:"bg-green-500/20 text-green-400"},2:{label:"Medium",color:"bg-yellow-500/20 text-yellow-400"},3:{label:"High",color:"bg-orange-500/20 text-orange-400"},4:{label:"Critical",color:"bg-red-500/20 text-red-400"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-700/50 flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-white font-semibold",children:["Pending Reviews (",l.length,")"]}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:"Content is anonymized for reviewer privacy"})]}),0===l.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-500/20 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-3xl",children:"✓"})}),(0,a.jsx)("p",{className:"text-slate-400",children:"All caught up! No pending reviews."})]}):(0,a.jsx)("div",{className:"divide-y divide-slate-700/50",children:l.map(e=>{let s=i[e.tier]||i[1];return(0,a.jsx)("div",{className:"p-4 hover:bg-slate-700/30 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-slate-700 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-2xl opacity-50",children:"\uD83D\uDD12"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs font-medium rounded ".concat(s.color),children:["Tier ",e.tier,": ",s.label]}),(0,a.jsx)("span",{className:"text-xs text-slate-500",children:e.category})]}),(0,a.jsx)("p",{className:"text-white mb-1",children:e.reason}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Stream: ",e.streamId.slice(0,8),"... • ",g(e.createdAt)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>t(e.id,"approve"),className:"px-3 py-2 bg-emerald-500/20 text-emerald-400 rounded-lg hover:bg-emerald-500/30 transition-colors text-sm",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>t(e.id,"reject"),className:"px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors text-sm",children:"Reject"}),(0,a.jsx)("button",{onClick:()=>t(e.id,"escalate"),className:"px-3 py-2 bg-orange-500/20 text-orange-400 rounded-lg hover:bg-orange-500/30 transition-colors text-sm",children:"Escalate"})]})]})},e.id)})})]}),(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-slate-700/50",children:(0,a.jsx)("h3",{className:"text-white font-semibold",children:"Recently Resolved"})}),(0,a.jsx)("div",{className:"p-4",children:0===r.length?(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No resolved reviews yet."}):(0,a.jsx)("div",{className:"space-y-2",children:r.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-white",children:e.category}),(0,a.jsx)("span",{className:"text-xs text-slate-500 ml-2",children:g(e.createdAt)})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("approved"===e.status?"bg-emerald-500/20 text-emerald-400":"rejected"===e.status?"bg-red-500/20 text-red-400":"bg-orange-500/20 text-orange-400"),children:e.status})]},e.id))})})]})]})}function c(){return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"Stream Management"}),(0,a.jsx)("p",{className:"text-slate-400",children:"View and manage all active and historical streams."}),(0,a.jsxs)("div",{className:"mt-4 p-8 bg-slate-700/30 rounded-lg text-center",children:[(0,a.jsx)("span",{className:"text-4xl opacity-50",children:"\uD83D\uDCF9"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2",children:"Stream management coming soon"})]})]})}function o(){return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"User Management"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Manage user accounts, sessions, and permissions."}),(0,a.jsxs)("div",{className:"mt-4 p-8 bg-slate-700/30 rounded-lg text-center",children:[(0,a.jsx)("span",{className:"text-4xl opacity-50",children:"\uD83D\uDC65"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2",children:"User management coming soon"})]})]})}function m(e){let{metrics:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"\uD83E\uDD16 Local AI (Ollama)"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500 animate-pulse"}),(0,a.jsx)("span",{className:"text-white font-medium",children:"Online"})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-1",children:"Models Loaded"}),(0,a.jsx)("p",{className:"text-white font-medium",children:"moondream, llava:7b"})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"\uD83D\uDCCA Queue Status"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:"0"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Analysis Queue"})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-400",children:"0"}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Alert Queue"})]}),(0,a.jsxs)("div",{className:"p-4 bg-slate-700/30 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-400",children:(null==s?void 0:s.pendingReviews)||0}),(0,a.jsx)("p",{className:"text-sm text-slate-400",children:"Review Queue"})]})]})]}),(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[(0,a.jsx)("h3",{className:"text-white font-semibold mb-4",children:"⚡ Quick Actions"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors text-sm",children:"Clear Analysis Queue"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors text-sm",children:"Restart Ollama"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors text-sm",children:"Run Cleanup"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors text-sm",children:"Emergency Stop All"})]})]})]})}function x(){let[e]=(0,l.useState)([{timestamp:new Date().toISOString(),level:"info",message:"System started successfully"},{timestamp:new Date(Date.now()-5e3).toISOString(),level:"info",message:"Ollama connection established"},{timestamp:new Date(Date.now()-1e4).toISOString(),level:"warning",message:"High memory usage detected"},{timestamp:new Date(Date.now()-15e3).toISOString(),level:"info",message:"Frame analysis completed"},{timestamp:new Date(Date.now()-2e4).toISOString(),level:"error",message:"Cloud fallback triggered"}]),s={info:"text-blue-400",warning:"text-yellow-400",error:"text-red-400"};return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-700/50 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-white font-semibold",children:"System Logs"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("select",{className:"px-3 py-1.5 bg-slate-700 border border-slate-600 rounded-lg text-sm text-white",children:[(0,a.jsx)("option",{children:"All Levels"}),(0,a.jsx)("option",{children:"Info"}),(0,a.jsx)("option",{children:"Warning"}),(0,a.jsx)("option",{children:"Error"})]}),(0,a.jsx)("button",{className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm transition-colors",children:"Export"})]})]}),(0,a.jsx)("div",{className:"font-mono text-sm divide-y divide-slate-700/30",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"px-4 py-3 hover:bg-slate-700/30 transition-colors",children:[(0,a.jsx)("span",{className:"text-slate-500",children:new Date(e.timestamp).toLocaleTimeString()}),(0,a.jsxs)("span",{className:"ml-4 ".concat(s[e.level]),children:["[",e.level.toUpperCase(),"]"]}),(0,a.jsx)("span",{className:"ml-4 text-slate-300",children:e.message})]},t))})]})}function h(){return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-slate-600 border-t-emerald-500 rounded-full animate-spin"})})}function u(e){let{label:s,value:t,max:l,unit:r,warning:i=!1}=e,n=Math.min(t/l*100,100);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-slate-400",children:s}),(0,a.jsxs)("span",{className:"text-slate-300",children:["number"==typeof t?t.toFixed(1):t,r]})]}),(0,a.jsx)("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(i||n>80?"bg-red-500":n>60?"bg-yellow-500":"bg-emerald-500"," rounded-full transition-all duration-500"),style:{width:"".concat(n,"%")}})})]})}function g(e){let s=new Date(e),t=new Date().getTime()-s.getTime();return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):s.toLocaleDateString()}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=18467)}),_N_E=e.O()}]);